<!doctype html>
<<<<<<< HEAD

<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      px-vis-polar Demo</title>
    <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->
    <script src="../webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="import" href="../px-theme/px-theme-styles.html">
    <style include="px-theme-styles" is="custom-style"></style>

    <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->
    <link rel="import" href="px-vis-pie-chart.html" />
    <link rel="import" href="../iron-ajax/iron-ajax.html" />
  </head>

  <body>

    <template id="demo" is="dom-bind">
      <h3>Demo</h3>
      <iron-ajax
        url="demo_data.json"
        handle-as="json"
        last-response="{{data}}" auto></iron-ajax>
      <span>Open new tab with snapshot of parallel chart with its navigator</span>
      <button id="btnSnap">Smile!</button>
      <button id="btnInc">Increase wrapper width</button>
      <button id="btnDec">Decrease wrapper width</button>
      <button id="btnIH">Increase wrapper height</button>
      <button id="btnDH">Decrease wrapper height</button>
      <div id="wrap" style="height:500px; border:1px solid black">
          <px-vis-pie-chart
            id="chart"
            chart-data="{{data}}"
            show-title
            margin='{ "top": "10", "bottom": "10", "left": "0", "right": "0" }'
            series-config='{
                "mySerie" :{"xAxisUnit": "pints",
                "y": "y",
                "x": "x"}
                }'
            >
            </px-vis-pie-chart>
          </div>
        </div>
    </template>
  </body>
  <script>
    document.addEventListener('WebComponentsReady', function() {
      var chart = document.getElementById('chart'),
          xConfigText = document.getElementById('xConfig'),
          yConfigText = document.getElementById('yConfig'),
          btnInc = document.getElementById('btnInc'),
          btnDec = document.getElementById('btnDec'),
          btnIH = document.getElementById('btnIH'),
          btnDH = document.getElementById('btnDH'),
          wrap = document.getElementById('wrap'),
          chart = document.getElementById('chart'),
          navigator = document.getElementById('navigatoor');

      btnSnap.addEventListener('click', function() {

        //fetch svg+canvas from chart and svg
        //from navigator and render them on a canvas
        var canvas = document.createElement('canvas'),
                context,
                chartCanvasContext = chart.canvasContext,
                svgChart = chart.pxSvgElem,
                svgNavigator = navigator.pxSvgElem,
                count = 0;

        canvas.width = Math.max(chart.width, navigator.width);
        canvas.height = chart.height + navigator.height;
        context = canvas.getContext('2d');

        //render chart canvas
     //   context.drawImage(chartCanvasContext.canvas, 0, 0);

        //to be called when svg is done drawing
        var callback = function(res) {
          if(count === 0) {
            //first svg has rendered, wait for second one
            count++;
          } else {

            //everything done
            window.open().location = res.toDataURL("image/png");
          }
        }

        //render chart svg and navigator svg
        chart._drawSVGOnCanvas(canvas, callback);
        navigator._drawSVGOnCanvas(canvas, callback, 0, chart.height);
      });

      btnInc.addEventListener('click', function() {
        var width = window.getComputedStyle(wrap).getPropertyValue("width");
        var cur = width.substr(0, width.length-2);
        wrap.style['width'] = Number(cur) + 25 + 'px';
        chart.notifyResize();
      });

      btnDec.addEventListener('click', function() {
        var width = window.getComputedStyle(wrap).getPropertyValue("width");
        var cur = width.substr(0, width.length-2);
        wrap.style['width'] = Number(cur) - 25 + 'px';
        chart.notifyResize();
      });

      btnIH.addEventListener('click', function() {

        var width = window.getComputedStyle(wrap).getPropertyValue("height");
        var cur = width.substr(0, width.length-2);
        wrap.style['height'] = Number(cur) + 25 + 'px';
        chart.notifyResize();
      });

      btnDH.addEventListener('click', function() {
        var width = window.getComputedStyle(wrap).getPropertyValue("height");
        var cur = width.substr(0, width.length-2);
        wrap.style['height'] = Number(cur) - 25 + 'px';
        chart.notifyResize();
      });
    });
  </script>

=======
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>px-vis-pie-chart Demo</title>
  <link rel="stylesheet" type="text/css" href="css/px-vis-pie-chart-demo.css"/>
  <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->
  <script src="../webcomponentsjs/webcomponents-lite.js"></script>

  <link rel="import" href="../px-theme/px-theme-styles.html">
  <style include="px-theme-styles" is="custom-style"></style>

  <link rel="import" href="../px-api-viewer/px-api-viewer.html" />
  <link rel="import" href="../px-tabs/px-tab-set.html" />
  <link rel="import" href="../iron-ajax/iron-ajax.html" />

  <link rel="import" href="px-vis-pie-chart.html"/>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>

  <link rel="import" href="../px-demo-snippet/px-demo-snippet.html">
  <link rel="import" href="../px-polymer-font-awesome/polymer-font-awesome.html" />
  <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->

  </head>

<body>

  <!-- Wrap elements with auto-binding template to -->
  <!-- allow use of Polymer bindings in main document -->
  <template id="just-for-demo" is="dom-bind" >
    <iron-ajax
      url="demo_data.json"
      handle-as="json"
      last-response="{{data}}" auto></iron-ajax>


                  <px-vis-pie-chart
                    chart-data="{{data}}"
                    height="500"
                    width="500"
                    use-percentage
                    register-config='{
                      "truncationLength": 500,
                      "width": 500
                    }'
                    aggregate-other-register
                    margin='{ "top": "10", "bottom": "10", "left": "0", "right": "0" }'
                    series-config='{
                      "mySerie" :{"xAxisUnit": "pints",
                      "y": "y",
                      "x": "x"}
                      }'
                    max-registers=0>
                  </px-vis-pie-chart>
                </div>

</template>

</body>
>>>>>>> master
</html>
